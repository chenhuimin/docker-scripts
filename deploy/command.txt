[root@localhost deploy]# ./deploy.sh -i omriiluz/spark:latest -w 3
*** Starting Spark latest ***
starting nameserver container
docker run -d --name nameserver.cluster -h nameserver.cluster -v /tmp/dnsdir_26731:/etc/dnsmasq.d -p 53/udp omriiluz/dnsmasq-precise:latest
started nameserver container:  97aa552621602eae2fa719443c13009ea8effcc466355f85d5ebaef3a3fd5e59
DNS host->IP file mapped:      /tmp/dnsdir_26731/0hosts
NAMESERVER_IP:                 172.17.0.3
waiting for nameserver to come up 
e8ce7ec66eb3c9d978f1670a751ab1b230bc2d7f5b309b6dac8e72a59dc9af40
0117171187d98cd731d569bec82acf9fed6a64f63d11012f4880e1bda7b22051
starting master container
docker run -d --dns 172.17.0.3 --dns-search cluster -h master.cluster --name master.cluster -e SPARK_MASTER_IP=master.cluster -e MASTER=spark://master.cluster:7077 omriiluz/spark-cluster-master:latest
started master container:      337a5f0cb1f68dd53a553767c9d05ce52950e32d0b170e99c4bcfb10736ecd35
MASTER_IP:                     172.17.0.6
waiting for master .........  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   148    0   123  100    25     24      4  0:00:06  0:00:05  0:00:01  120k
.  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
waiting for nameserver to find master 
starting worker container
docker run -d --dns 172.17.0.3 --dns-search cluster -h worker1.cluster --name worker1.cluster -e SPARK_WORKER_CORES=2 -e SPARK_MASTER_IP=master.cluster -e MASTER=spark://master.cluster:7077 omriiluz/spark-cluster-worker:latest 172.17.0.6
started worker container:  696ec09adef849769b67c4522b6a4cf7ee5d18d29b956ad4eba8777119710c42
starting worker container
docker run -d --dns 172.17.0.3 --dns-search cluster -h worker2.cluster --name worker2.cluster -e SPARK_WORKER_CORES=2 -e SPARK_MASTER_IP=master.cluster -e MASTER=spark://master.cluster:7077 omriiluz/spark-cluster-worker:latest 172.17.0.6
started worker container:  8dceb442d9ee1792332d15e4e44af0311b1889afab4e0a7b54416355e59ca64a
starting worker container
docker run -d --dns 172.17.0.3 --dns-search cluster -h worker3.cluster --name worker3.cluster -e SPARK_WORKER_CORES=2 -e SPARK_MASTER_IP=master.cluster -e MASTER=spark://master.cluster:7077 omriiluz/spark-cluster-worker:latest 172.17.0.6
started worker container:  9fcf28523da674064aaa01c78df413c5e6db967e3404845466040bfe61567403
waiting for workers to register ......................
docker run -d --name cass1.cluster -h cass1.cluster -p 9042:9042 -p 9160:9160 poklet/cassandra
d9322c0682842e729b378be3b4c309e320e85214822b5d054bc3e134be6fd4d2

c0537aa22400733a523e15efa402b7642bbb1c1a5d5ce64c14a5d98add85813f
6700de2bc4318710dfab7290d4c3ca1400ea8c89e12a944fa7b3f45b9eaa4418


***********************************************************************
start shell via:            /home/pea/docker_file/omriiluz_docker-scripts/docker-scripts/deploy/start_shell.sh -i omriiluz/spark-shell:latest -n 97aa552621602eae2fa719443c13009ea8effcc466355f85d5ebaef3a3fd5e59 

visit Spark WebUI at:       http://172.17.0.6:8080/
visit Hadoop Namenode at:   http://172.17.0.6:50070
ssh into master via:        ssh -i /home/pea/docker_file/omriiluz_docker-scripts/docker-scripts/deploy/../apache-hadoop-hdfs-precise/files/id_rsa -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no root@172.17.0.6

/data mapped:               

kill master via:           docker kill 337a5f0cb1f68dd53a553767c9d05ce52950e32d0b170e99c4bcfb10736ecd35
***********************************************************************

to enable cluster name resolution add the following line to _the top_ of your host's /etc/resolv.conf:
nameserver 172.17.0.3

Cleanup: docker rm -f  nameserver.cluster etcd.cluster skydns.cluster master.cluster worker1.cluster worker2.cluster worker3.cluster cass.cluster zookeeper.cluster kafka.cluster

address="/nameserver.cluster/172.17.0.3"
address="/etcd.cluster/172.17.0.4"
address="/skydns.cluster/172.17.0.5"
address="/master.cluster/172.17.0.6"
address="/worker1.cluster/172.17.0.7"
address="/worker2.cluster/172.17.0.8"
address="/worker3.cluster/172.17.0.9"
address="/cass.cluster/172.17.0.10"
address="/zookeeper.cluster/172.17.0.11"
address="/kafka.cluster/172.17.0.12"

[root@localhost deploy]# more /etc/resolv.conf 
# Generated by NetworkManager
nameserver 172.17.0.3
nameserver 192.168.16.1
nameserver 192.168.1.1
